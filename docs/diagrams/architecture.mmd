graph TB
    subgraph "üñ•Ô∏è Desktop Application (Electron)"
        subgraph "Frontend (Next.js + React)"
            UI[React Components<br/>shadcn/ui]
            Hooks[Custom Hooks<br/>Zustand Store]
            Router[App Router<br/>Next.js 14]
            UI --> Hooks --> Router
        end

        subgraph "Electron Main Process"
            Main[Main Process<br/>main.ts]
            IPC[IPC Handlers<br/>electron/ipc/handlers/]
            Services[Services<br/>database, vectordb, logger]
            FileSystem[File System<br/>fs, path]

            Main --> IPC
            IPC --> Services
            IPC --> FileSystem
        end

        subgraph "Preload Bridge"
            Preload[Context Bridge<br/>preload.ts]
        end

        Router -.IPC.-> Preload
        Preload -.IPC.-> IPC
    end

    subgraph "üåê External Services"
        LLM[LLM APIs<br/>OpenAI, Claude, Ollama]
        GitHub[GitHub API<br/>Team Docs Sync]
        ComfyUI[ComfyUI<br/>Image Generation]
        MCP[MCP Servers<br/>External Tools]
    end

    Services --> LLM
    Services --> GitHub
    Services --> ComfyUI
    IPC --> MCP

    subgraph "üíæ Local Storage"
        SQLite[(SQLite<br/>Chat History)]
        VectorDB[(SQLite-vec<br/>RAG Embeddings)]
        Config[JSON Files<br/>Settings, Configs]
    end

    Services --> SQLite
    Services --> VectorDB
    Services --> Config

    style UI fill:#3b82f6,stroke:#1e40af,color:#fff
    style Main fill:#8b5cf6,stroke:#6d28d9,color:#fff
    style LLM fill:#10b981,stroke:#059669,color:#fff
    style SQLite fill:#f59e0b,stroke:#d97706,color:#fff
