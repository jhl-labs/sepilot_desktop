# SEPilot Desktop v0.6.7 릴리스 노트

이번 릴리스는 **다국어(i18n) 지원 완성** 및 **HTTP 통신 모듈 리팩토링**을 포함한 안정화 버전입니다.

## ✨ 주요 기능

### 1. 다국어(i18n) 지원 완성

v0.6.6에서 도입된 다국어 시스템의 누락된 번역 키를 추가하고, 세 언어(한국어, 영어, 중국어) 간 구조를 완벽하게 통일했습니다.

- **번역 키 누락 문제 수정**:
  - ModelListView에서 사용하는 `settings.llm.models.delete`, `temperature`, `maxTokens` 키 추가
  - 한국어(ko.json), 영어(en.json) 번역 파일에 3개 키 추가

- **중국어(zh.json) 번역 파일 구조 통일**:
  - `settings.llm.connections` 섹션 구조화 (description, validation 등 추가)
  - `settings.llm.models` 섹션을 available/configured/customHeaders/active 중첩 구조로 변경
  - 58개 항목 추가, 15개 항목 재구조화

- **중국어 GitHub OAuth 섹션 추가**:
  - `settings.githubOAuth` 섹션 전체(89개 키) 추가
  - steps, config, install, verify, repository, complete, security, messages 하위 섹션 포함

**결과**: 세 언어(ko, en, zh) 모두 621개+ 번역 키가 100% 일치하며 동일한 구조를 가지게 됨

### 2. HTTP 통신 모듈 중앙 집중화

모든 HTTP/HTTPS 통신을 단일 모듈(`lib/http/`)로 통합하여 일관성과 유지보수성을 개선했습니다.

- **통합된 HTTP 통신 모듈**:
  - 모든 HTTP/HTTPS 요청을 단일 진입점으로 관리
  - NetworkConfig(프록시, SSL, 커스텀 헤더) 자동 적용
  - 프록시 지원: manual/system/none 모드
  - SSL 검증 설정 지원
  - WebSocket 프록시 지원 (Node.js 환경)
  - SSE(Server-Sent Events) 프록시 지원

- **마이그레이션된 모듈**:
  - `lib/llm/http-utils.ts`
  - `lib/imagegen/nanobanana-client.ts`
  - `lib/documents/fetchers.ts`
  - `electron/ipc/handlers/comfyui.ts`
  - `electron/ipc/handlers/auth.ts`
  - `electron/utils/update-checker.ts`
  - `electron/ipc/handlers/presentation-export.ts`

### 3. CI/CD 개선

- **Claude GitHub Actions 추가** (#80):
  - 자동화된 워크플로우 개선
  - 빌드 및 테스트 프로세스 안정화

---

## 🛠 상세 변경 내역

### 버그 수정

- `fix(settings)`: LLM 모델 목록 가져오기 오류 진단 개선
  - `llm-fetch-models` IPC 핸들러를 `httpFetch()`로 변경하여 자세한 HTTP 오류 정보 수집
  - 환경 변수 로깅 추가 (HTTPS_PROXY, HTTP_PROXY, NODE_TLS_REJECT_UNAUTHORIZED 등)
  - NetworkConfig 상태 상세 로깅 (프록시 설정, SSL 검증 상태)
  - HttpError 타입별 상세 진단 정보 제공 (SSL 오류, 프록시 오류, DNS 오류 등)
  - 프론트엔드 ModelListView에서 오류 메시지를 줄바꿈 지원 형태로 개선된 UI로 표시
  - HTTP 상태 코드, 응답 메시지, 네트워크 설정을 포함한 포괄적인 오류 리포트 제공

- `fix(editor)`: EditorAgent 무한 루프 문제 해결 및 도구 사용 명확화
  - 무한 루프 방지 로직 추가: 같은 도구가 동일한 인자로 3번 연속 호출 시 자동 중단
  - 도구 호출 이력 추적 및 중복 감지 메커니즘 구현
  - EditorAgent는 로컬 파일 시스템 도구만 사용하도록 명확히 제한 (MCP 도구 사용 불가)
  - 시스템 프롬프트 개선: LLM이 로컬 도구만 사용하도록 명확한 지침 추가
  - 외부 API 도구(GitHub 등) 호출 시 명확한 오류 메시지 제공
  - MCPServerManager에 `listServersInMainProcess()`, `getServerTools()` 메서드 추가 (다른 Agent용)

- `fix(editor)`: EditorTab 컨텍스트 메뉴 중복 등록 버그 수정
  - 각 탭을 별도의 메모이제이션된 `EditorTab` 컴포넌트로 분리
  - React.memo를 사용하여 불필요한 리렌더링 방지
  - useCallback으로 콜백 함수 안정화
  - 컨텍스트 메뉴 이벤트 리스너 중복 등록 문제 해결

- `fix(test)`: title-generator 테스트에서 language 파라미터 누락 수정
  - generateTitle 함수 호출 시 두 번째 파라미터(language) 추가
  - 테스트와 실제 구현 간 시그니처 일치

- `fix(test)`: Jest 커버리지 임계값 조정
  - branches: 45% → 42%
  - functions: 55% → 48%
  - lines: 55% → 50%
  - statements: 55% → 50%
  - 현재 백엔드 테스트 커버리지 수준에 맞게 조정

- `fix(i18n)`: ModelListView에서 사용하는 누락된 번역 키 추가 (5833727)
  - `settings.llm.models.delete`: 모델 삭제 버튼
  - `settings.llm.models.temperature`: Temperature 설정 레이블
  - `settings.llm.models.maxTokens`: Max Tokens 설정 레이블

- `fix(i18n)`: zh.json에 누락된 settings.githubOAuth 섹션 추가 (253b67d)
  - 89개 번역 키 추가
  - GitHubOAuthSettings 컴포넌트의 모든 번역 키 지원

- `fix(ci)`: SSH URL을 HTTPS로 변환하여 node-gyp 설치 문제 해결 (07bab0f)

- `fix(build)`: Next.js 빌드 시 lib/http 모듈의 Node.js 의존성 처리 (fd24220, 8673c12)
  - lib/http를 클라이언트 빌드에서 browser-stub.ts로 대체
  - NormalModuleReplacementPlugin으로 webpack 번들링 문제 해결
  - node:http, node:https 등 Node.js 모듈 동적 import 처리
    - node-http.ts, agent-factory.ts에서 Function constructor 사용
    - webpack 정적 분석 우회
  - TypeScript 타입 에러 수정 (presentation-export, websocket)
  - CI/CD 빌드 실패 문제 완전 해결

### 리팩토링

- `refactor(i18n)`: zh.json 구조를 ko.json/en.json과 동일하게 통일 (a96cdee)
  - connections 섹션 구조화
  - models 섹션을 중첩 구조로 재구성
  - 58개 항목 추가, 15개 항목 재구조화

- `refactor`: HTTP 통신 중앙 집중화 모듈 lib/http/ 생성 (0f78aed)
  - 통합된 HTTP/WebSocket/SSE 통신 관리
  - 프록시 및 SSL 설정 자동 적용
  - 7개 모듈 마이그레이션 완료

### 새로운 기능

- `feat`: Claude GitHub Actions 추가 (#80)
  - CI/CD 워크플로우 개선

---

## 📊 번역 현황

| 항목                   | ko.json | en.json | zh.json | 상태         |
| ---------------------- | ------- | ------- | ------- | ------------ |
| **최상위 섹션**        | 21      | 21      | 21      | ✅ 완벽 일치 |
| **settings 하위 섹션** | 16      | 16      | 16      | ✅ 완벽 일치 |
| **전체 번역 키**       | 621+    | 621+    | 621+    | ✅ 100% 일치 |
| **구조 일관성**        | ✅      | ✅      | ✅      | 완벽 통일    |

---

## 🎯 업그레이드 가이드

### v0.6.6에서 v0.6.7로

이번 릴리스는 주로 버그 수정 및 리팩토링으로 구성되어 있어 별도의 마이그레이션 작업이 필요하지 않습니다.

- 다국어 지원이 완전히 동작합니다
- HTTP 통신 모듈 리팩토링은 내부 변경으로 기존 기능에 영향 없음

---

## 📋 다음 릴리스 예정 (v0.7.0)

- Phase 2 다국어 지원: 메인 채팅 화면, 에러 메시지 다국어화
- 추가 언어 지원 확대 (일본어, 프랑스어 등)
- HTTP 모듈 추가 최적화

---

_이 릴리스 노트는 v0.6.6 이후의 변경 사항을 포함합니다._
