# SEPilot Desktop v0.6.3 릴리스 노트

## 주요 변경 사항

### 새로운 기능

- **DocumentUploadDialog에 Team Docs Repository 선택 기능 추가**
  - **근본 원인 해결**: 문서 생성 시부터 올바른 `teamDocsId` 설정
  - **Team Docs 선택 UI**: 문서 그룹을 'team'으로 선택 시 Repository 선택 드롭다운 표시
  - **자동 메타데이터 설정**: 선택한 Team Docs의 `teamDocsId`, `teamName`, `source` 자동 포함
  - **검증 로직**: Team Docs 선택하지 않으면 업로드 차단
  - **사용자 안내**: Team Docs 미설정 시 경고 메시지 표시
  - 코드 위치: `components/rag/DocumentUploadDialog.tsx:59-324`

### 버그 수정 및 UX 개선

- **Team Docs Push 에러 방지 및 UX 개선**
  - **UI 개선**: `teamDocsId`가 없는 경우 "저장 & Push" 버튼 비활성화
  - **시각적 피드백**: 비활성화된 버튼에 경고 아이콘 표시
  - **명확한 설명**: Tooltip으로 Push 불가 이유 설명
    - "Team Docs ID가 없어 GitHub Push를 할 수 없습니다."
    - "이 문서는 Team Docs에서 가져온 문서가 아닙니다."
  - **이중 안전장치**: 버튼 비활성화 + 백엔드 검증으로 에러 방지
  - 코드 위치:
    - UI 개선: `components/rag/DocumentEditDialog.tsx:477-520`
    - 백엔드 검증: `components/rag/DocumentEditDialog.tsx:219-226`

## 기술적 세부 사항

### 에러 발생 근본 원인

DocumentUploadDialog에서 `docGroup: 'team'`을 선택하면:

- **문제**: `teamDocsId` 없이 문서가 생성됨
- **결과**: 해당 문서는 Team Docs로 Push 불가능
- **에러**: "Team Docs 설정을 찾을 수 없습니다: undefined"

기존에는:

1. 사용자가 DocumentUploadDialog에서 Team Docs 선택
2. `docGroup: 'team'`만 설정되고 `teamDocsId`는 누락
3. DocumentEditDialog에서 "저장 & Push" 시도
4. `teamDocsId: undefined` 전달 → 에러 발생

### 해결 방법

#### 1. 근본 원인 해결 (DocumentUploadDialog)

- **Team Docs Repository 선택 UI 추가**:
  - `docGroup: 'team'` 선택 시 Repository 드롭다운 표시
  - 사용자가 명시적으로 어떤 Team Docs인지 선택
- **자동 메타데이터 설정**:
  - `teamDocsId`: 선택한 Team Docs ID
  - `teamName`: Team Docs 이름
  - `source`: `{owner}/{repo}` 형식
- **검증 로직**:
  - Team Docs 선택하지 않으면 업로드 차단
  - Team Docs 미설정 시 경고 메시지 표시

#### 2. 증상 완화 (DocumentEditDialog)

- **프론트엔드 (1차 방어)**:
  - `teamDocsId` 없으면 "저장 & Push" 버튼 비활성화
  - Tooltip으로 상태 및 이유 설명
  - AlertCircle 아이콘으로 시각적 피드백
- **백엔드 (2차 방어)**:
  - Push 요청 전 `teamDocsId` 존재 여부 검증
  - 검증 실패 시 Push 중단 및 명확한 에러 메시지 표시

### UI/UX 개선 효과

- **근본 해결**: 처음부터 올바른 메타데이터로 문서 생성
- **사용자 가이드**: 어떤 Team Docs에 속할지 명확히 선택
- **에러 방지**: 잘못된 상태의 문서가 생성되지 않음
- **직관적 UI**: 혼란스러운 에러 대신 사전 안내

## 영향 범위

- Team Docs 문서 업로드 기능 (신규)
- Team Docs 문서 편집 기능 (개선)
- GitHub 동기화 안정성 및 사용자 경험 대폭 향상
