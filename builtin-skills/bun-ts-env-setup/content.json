{
  "systemPrompt": "TypeScript/JavaScript 스크립트를 실행할 때 Bun을 우선 사용합니다. SEPilot 전용 TypeScript 환경 디렉토리(`~/.sepilot/environments/typescript`)를 사용하여 패키지를 격리 설치합니다.\n\n## Bun 우선 사용 규칙\n\n1. **Bun 감지**: `command -v bun` 또는 `~/.bun/bin/bun`으로 Bun 존재 여부 확인\n2. **Bun 설치 (Human-in-the-Loop 필수)**: Bun이 없으면 설치를 제안하되, **반드시 사용자 승인을 받은 후** 실행합니다. 외부 스크립트 다운로드(`curl | bash`)는 보안 위험이 있으므로 사전 동의 없이 절대 자동 실행하지 않습니다.\n   - Linux/macOS: `curl -fsSL https://bun.sh/install | bash`\n   - Windows: `powershell -c \"irm bun.sh/install.ps1|iex\"` 또는 `npm install -g bun`\n3. **단순 스크립트**: 의존성 없는 `.ts` 파일은 `bun run script.ts`로 바로 실행\n4. **패키지 필요 시**: `~/.sepilot/environments/typescript`에서 `bun install` 후 실행\n\n## 원샷 실행 패턴 (command_execute용)\n\n### 단순 TypeScript 실행 (의존성 없음)\n```bash\n(command -v bun >/dev/null || curl -fsSL https://bun.sh/install | bash) && \\\nbun run /path/to/script.ts\n```\n\n### 패키지 설치 + 실행\n```bash\nTS_ENV=\"$HOME/.sepilot/environments/typescript\" && \\\nmkdir -p \"$TS_ENV\" && \\\n(command -v bun >/dev/null || curl -fsSL https://bun.sh/install | bash) && \\\ncd \"$TS_ENV\" && bun add 필요패키지 && \\\nbun run /path/to/script.ts\n```\n\n## 금지사항\n- ❌ 사용자에게 Bun이나 Node.js 수동 설치를 요청\n- ❌ 스크립트를 작성만 하고 실행하지 않는 것\n- ❌ 글로벌 npm install 실행",
  "knowledge": [
    {
      "title": "SEPilot Bun/TypeScript 환경 구성",
      "content": "# SEPilot Bun/TypeScript 환경 구성\n\n## 개요\nSEPilot은 TypeScript/JavaScript 실행에 Bun을 우선 사용합니다. Bun은 내장 TypeScript 지원으로 별도의 트랜스파일 설정 없이 .ts 파일을 바로 실행합니다.\n\n## 환경 경로\n- 패키지 격리 디렉토리: `~/.sepilot/environments/typescript`\n- Bun 기본 설치 경로: `~/.bun/bin/bun`\n\n## Bun 감지 및 자동 설치\n```bash\n# Bun 존재 확인 후 없으면 설치\ncommand -v bun >/dev/null 2>&1 || curl -fsSL https://bun.sh/install | bash\n\n# 설치 후 PATH에 추가 (현재 세션)\nexport BUN_INSTALL=\"$HOME/.bun\"\nexport PATH=\"$BUN_INSTALL/bin:$PATH\"\n```\n\n## 단순 TypeScript 스크립트 실행\n외부 패키지가 필요 없는 스크립트는 바로 실행:\n```bash\nbun run /path/to/script.ts\n```\n\nBun은 TypeScript를 네이티브로 실행하므로 tsconfig.json이 없어도 됩니다.\n\n## 패키지가 필요한 프로젝트 실행\n```bash\nTS_ENV=\"$HOME/.sepilot/environments/typescript\"\nmkdir -p \"$TS_ENV\"\ncd \"$TS_ENV\"\n\n# 패키지 설치\nbun add axios cheerio\n\n# 스크립트 실행 (TS_ENV의 node_modules 사용)\nbun run /path/to/script.ts\n```\n\n## 원샷 패턴 (command_execute)\n```bash\n# 의존성 없는 스크립트\n(command -v bun >/dev/null || curl -fsSL https://bun.sh/install | bash) && \\\nbun run /path/to/script.ts\n\n# 패키지 필요한 스크립트\nTS_ENV=\"$HOME/.sepilot/environments/typescript\" && \\\nmkdir -p \"$TS_ENV\" && \\\n(command -v bun >/dev/null || curl -fsSL https://bun.sh/install | bash) && \\\ncd \"$TS_ENV\" && bun add axios cheerio && \\\nbun run /path/to/script.ts\n```\n\n## Node.js 폴백\nBun 설치가 불가능한 환경에서는 Node.js + ts-node를 대안으로 사용:\n```bash\nnpx ts-node /path/to/script.ts\n# 또는\nnpx tsx /path/to/script.ts\n```\n\n## 장점\n1. **제로 설정**: TypeScript를 바로 실행 (트랜스파일 불필요)\n2. **빠른 실행**: Bun은 Node.js 대비 빠른 시작 시간\n3. **패키지 격리**: `~/.sepilot/environments/typescript`에 설치하여 글로벌 오염 방지\n4. **내장 패키지 매니저**: `bun add`로 의존성 설치 (npm/yarn 불필요)\n5. **자동 설치**: Bun이 없으면 자동으로 설치하므로 사용자 개입 불필요"
    }
  ]
}
